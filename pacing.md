# ***Pacing***

Pacing(*пэйсинг, шаг нагрузки*) - время, за которое должна выполняться итерация скрипта нагрузочного тестирования, 
чтобы обеспечить необходимую интенсивность при заданном количестве пользователей.

Обычно за pacing берется среднее время выполнения скрипта с thinktime`ами. Имея это значение и требуемую интенсивность,
мы можем посчитать необходимое нам количество виртуальных пользователей.

Допустим, у нас есть операция `Login`, которую мы хотим выполнять 7 раз в секунду. Вместе с thinktime`ами время
выполнения всех запросов внутри этой операции занимает 13 секунд. Соответственно, мы можем легко посчитать, сколько
виртуальных пользователей нам понадобится по следующей формуле:

```
V = P * I
```

Где:

- P - pacing(в секундах).
- I - требуемая интенсивность(итераций в секунду).
- V - количество виртуальных пользователей.

Подставляем наши значения, и получаем:

```
V = 13 * 7
V = 91
```

Проверим, за час при интенсивности 7 операций в секунду у нас должно выполниться `7 * 60 * 60 = 25200` операций. 91
виртуальный пользователь, каждый из которых тратит 13 секунд на выполнение одной операции выполнят за час 
`91 * 60 * 60 / 13 = 25200` операций. 

Возможна ситуация, когда у нас есть ограничение по количеству виртуальных пользователей(например, ограничение по
количеству тестовых данных или же по мощности нагрузочной станции), и мы хотим рассчитать какой pacing потребуется,
чтобы с помощью данного количества виртуальных пользователей обеспечить нужную интенсивность. В таком случае формула 
будет иметь следующий вид:

`P = V / I`

Например, у нас есть ограничение в 1000 виртуальных пользователей, и нам нужно нагружать операцию оформления заявки с
интенсивностью 40000 операций в час. Попробуем подставить значения в формулу:

```
P = 1000 / (40000 / (60 * 60)) // 60 * 60 - количество секунд в часе.
P = 1000 / 11.1111111 // 11.1111111 - количество операций в секунду, которое должен выполнять один пользователь,
чтобы получить нужную интенсивность.
P ~= 90
```
